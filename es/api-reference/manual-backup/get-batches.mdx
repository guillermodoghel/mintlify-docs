---
title: 'GET /invoices/batches - Listar Lotes'
description: 'Documentaci√≥n para obtener la lista de lotes de facturas'
---

# üì¶ GET /invoices/batches - Listar Lotes

Este endpoint te permite obtener la lista de lotes de facturas con paginaci√≥n.

## URL Base

```
https://facture.ar/api/invoices/batches
```

## Autenticaci√≥n

Todas las peticiones requieren autenticaci√≥n usando:

- **Sesi√≥n Web**: Para aplicaciones basadas en navegador
- **API Key**: Para integraciones servidor a servidor

Incluye tu API key en el header `x-api-key`:

```bash
x-api-key: tu-api-key-aqui
```

## Par√°metros de Consulta

| Par√°metro | Tipo   | Requerido | Descripci√≥n                                      | Ejemplo |
| --------- | ------ | --------- | ------------------------------------------------ | ------- |
| `page`    | number | ‚ùå        | N√∫mero de p√°gina (por defecto: 1)                | `1`     |
| `limit`   | number | ‚ùå        | Elementos por p√°gina (por defecto: 10, m√°x: 100) | `20`    |

## Respuesta

### √âxito (200)

```json
{
  "batches": [
    {
      "id": "123e4567-e89b-12d3-a456-426614174000",
      "status": "completed",
      "totalItems": 5,
      "processedItems": 5,
      "successfulItems": 4,
      "failedItems": 1,
      "environment": "production",
      "createdAt": "2024-01-01T10:00:00Z",
      "updatedAt": "2024-01-01T10:05:00Z",
      "jobs": [
        {
          "id": "456e7890-e89b-12d3-a456-426614174001",
          "status": "completed",
          "order": 1,
          "createdAt": "2024-01-01T10:00:00Z",
          "updatedAt": "2024-01-01T10:01:00Z",
          "requestBody": {
            "amount": 1000.0,
            "description": "Venta de servicios"
          },
          "responseBody": {
            "success": true,
            "invoiceId": "789e0123-e89b-12d3-a456-426614174002"
          }
        }
      ]
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "totalCount": 25,
    "totalPages": 3,
    "hasNextPage": true,
    "hasPrevPage": false
  }
}
```

### Respuestas de Error

#### No Autorizado (401)

```json
{
  "error": "Unauthorized",
  "details": "Invalid API key or session"
}
```

#### Error del Servidor (500)

```json
{
  "error": "Internal server error",
  "details": "Failed to fetch batches"
}
```

## Campos de Respuesta

### Lote (Batch)

| Campo             | Tipo   | Descripci√≥n                              |
| ----------------- | ------ | ---------------------------------------- |
| `id`              | string | ID √∫nico del lote                        |
| `status`          | string | Estado del lote                          |
| `totalItems`      | number | Total de items en el lote                |
| `processedItems`  | number | Items procesados                         |
| `successfulItems` | number | Items exitosos                           |
| `failedItems`     | number | Items fallidos                           |
| `environment`     | string | Ambiente (production/homologation)       |
| `createdAt`       | string | Fecha de creaci√≥n (ISO 8601)             |
| `updatedAt`       | string | Fecha de √∫ltima actualizaci√≥n (ISO 8601) |
| `jobs`            | array  | Items del lote                           |

### Item del Lote (Job)

| Campo          | Tipo   | Descripci√≥n                              |
| -------------- | ------ | ---------------------------------------- |
| `id`           | string | ID √∫nico del item                        |
| `status`       | string | Estado del item                          |
| `order`        | number | Orden en el lote                         |
| `createdAt`    | string | Fecha de creaci√≥n (ISO 8601)             |
| `updatedAt`    | string | Fecha de √∫ltima actualizaci√≥n (ISO 8601) |
| `requestBody`  | object | Datos de la factura original             |
| `responseBody` | object | Respuesta del procesamiento              |

### Paginaci√≥n

| Campo         | Tipo    | Descripci√≥n          |
| ------------- | ------- | -------------------- |
| `page`        | number  | P√°gina actual        |
| `limit`       | number  | Elementos por p√°gina |
| `totalCount`  | number  | Total de lotes       |
| `totalPages`  | number  | Total de p√°ginas     |
| `hasNextPage` | boolean | Hay p√°gina siguiente |
| `hasPrevPage` | boolean | Hay p√°gina anterior  |

## Estados de Lote

| Estado                  | Descripci√≥n                          |
| ----------------------- | ------------------------------------ |
| `pending`               | Lote creado, esperando procesamiento |
| `processing`            | Lote en proceso                      |
| `completed`             | Lote procesado completamente         |
| `completed_with_errors` | Lote procesado con algunos errores   |
| `error`                 | Lote fall√≥ completamente             |

## Estados de Item

| Estado       | Descripci√≥n                    |
| ------------ | ------------------------------ |
| `pending`    | Item en cola                   |
| `processing` | Item siendo procesado          |
| `completed`  | Item procesado exitosamente    |
| `error`      | Item fall√≥ en el procesamiento |

## Ejemplos de Uso

### Obtener Primera P√°gina

```bash
curl -X GET https://facture.ar/api/invoices/batches \
  -H "x-api-key: tu-api-key"
```

### Obtener P√°gina Espec√≠fica

```bash
curl -X GET "https://facture.ar/api/invoices/batches?page=2&limit=20" \
  -H "x-api-key: tu-api-key"
```

### JavaScript/Node.js

```javascript
// Obtener lotes con paginaci√≥n
const response = await fetch('https://facture.ar/api/invoices/batches?page=1&limit=10', {
  method: 'GET',
  headers: {
    'x-api-key': 'tu-api-key',
  },
});

const result = await response.json();
console.log('Lotes:', result.batches);
console.log('Paginaci√≥n:', result.pagination);

// Verificar si hay m√°s p√°ginas
if (result.pagination.hasNextPage) {
  console.log('Hay m√°s p√°ginas disponibles');
}
```

### Python

```python
import requests

# Obtener lotes
response = requests.get(
    'https://facture.ar/api/invoices/batches',
    headers={
        'x-api-key': 'tu-api-key'
    },
    params={
        'page': 1,
        'limit': 20
    }
)

result = response.json()
print('Lotes:', result['batches'])
print('Total de lotes:', result['pagination']['totalCount'])

# Verificar si hay m√°s p√°ginas
if result['pagination']['hasNextPage']:
    print('Hay m√°s p√°ginas disponibles')
```

## ‚ùì Soluci√≥n de Problemas

<Accordion title="Error: No se encontraron lotes">
**Causa**: No tienes lotes creados en tu cuenta.

**Soluci√≥n**:

1. Verifica que hayas creado al menos un lote de facturas
2. Aseg√∫rate de estar usando el ambiente correcto
3. Revisa que el lote no est√© en estado de error

</Accordion>

<Accordion title="Error: L√≠mite excedido">
**Causa**: El par√°metro limit excede el m√°ximo permitido.

**Soluci√≥n**:

1. Usa un l√≠mite menor o igual a 100
2. Implementa paginaci√≥n para obtener m√°s resultados
3. Usa filtros m√°s espec√≠ficos si est√°n disponibles

</Accordion>

<Accordion title="Error: No autorizado">
**Causa**: API key inv√°lida o sesi√≥n expirada.

**Soluci√≥n**:

1. Verifica que tu API key sea v√°lida
2. Aseg√∫rate de incluir el header `x-api-key`
3. Regenera tu API key si es necesario
</Accordion>

## üìû Soporte

Para soporte t√©cnico o preguntas sobre la API:

- üìß **Email**: support@facture.ar
- üí¨ **Chat**: Disponible en la plataforma
- üìö **Documentaci√≥n**: Explora nuestros ejemplos detallados
- üé• **Videollamada**: Para asistencia personalizada
