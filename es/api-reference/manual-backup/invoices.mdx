---
title: 'POST /invoices - Crear Facturas'
description: 'Documentación completa para crear facturas electrónicas con la API de Facturear'
---

# 📄 POST /invoices - Crear Facturas

La API de creación de facturas te permite crear facturas electrónicas (facturas electrónicas) en el sistema AFIP de Argentina. Este endpoint soporta tanto la creación de facturas individuales como el procesamiento en lote a través de un sistema unificado basado en colas.

## URL Base

```
https://facture.ar/api/invoices
```

## Autenticación

Todas las peticiones requieren autenticación usando:

- **API Key**: Para integraciones servidor a servidor

Incluye tu API key en el header `x-api-key`:

```bash
x-api-key: tu-api-key-aqui
```

## Resumen

El endpoint POST /api/invoices procesa las solicitudes de creación de facturas a través de un sistema sofisticado basado en colas que garantiza:

- **Confiabilidad**: Todas las facturas se procesan de forma asíncrona con lógica de reintentos
- **Escalabilidad**: El procesamiento basado en colas maneja altos volúmenes eficientemente
- **Consistencia**: Procesamiento unificado para operaciones individuales y en lote
- **Manejo de errores**: Clasificación completa de errores y mecanismos de reintento

## Formato de Petición

El endpoint acepta tanto objetos de factura individuales como arrays de facturas:

### Petición de Factura Individual

```json
{
  "cuitId": "uuid-string",
  "amount": 1000.0,
  "description": "Venta de servicios",
  "docTipo": 99,
  "docNro": 0,
  "invoiceType": 11
}
```

### Petición de Facturas en Lote

```json
[
  {
    "cuitId": "uuid-string",
    "amount": 1000.0,
    "description": "Venta de servicios"
  },
  {
    "cuitId": "uuid-string",
    "amount": 2000.0,
    "description": "Venta de productos"
  }
]
```

## Parámetros del Cuerpo de la Petición

### Parámetros Requeridos

| Parámetro             | Tipo   | Descripción               |
| --------------------- | ------ | ------------------------- |
| `amount` o `impTotal` | number | Monto total de la factura |

<Callout type="warning">
  **Importante**: Para facturas con montos superiores a $10,000,000, los campos `docTipo` y `docNro` son obligatorios y deben especificarse en la petición.
</Callout>

### Parámetros Opcionales

| Parámetro                | Tipo   | Por defecto                               | Descripción                                                                                                   |
| ------------------------ | ------ | ----------------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| `cuitId` o `cuit`        | string | CUIT por defecto del usuario              | UUID del CUIT o número de CUIT (con o sin guiones). Si no se proporciona, usa el CUIT por defecto del usuario |
| `docTipo`                | number | 99                                        | Tipo de documento (99=Consumidor Final, 80=CUIT)                                                              |
| `docNro`                 | number | 0                                         | Número de documento                                                                                           |
| `condicionIVAReceptorId` | number | 5                                         | Condición de IVA (5=Consumidor Final, 1=IVA Responsable)                                                      |
| `monId`                  | string | "PES"                                     | ID de moneda                                                                                                  |
| `invoiceType`            | number | 9 (Régimen General) o 11 (Monotributo)    | Tipo de factura (1=Factura A, 11=Factura C, etc.)                                                             |
| `concepto`               | number | Por defecto del CUIT                      | Tipo de concepto (1=Productos, 2=Servicios, 3=Ambos)                                                          |
| `ptoVta`                 | number | Por defecto del CUIT                      | Número de punto de venta                                                                                      |
| `description`            | string | "Venta de `concepto por defecto del cuit` | Descripción de la factura                                                                                     |
| `clientName`             | string | -                                         | Nombre/empresa del cliente                                                                                    |
| `cbteFch`                | string | Fecha actual                              | Fecha de la factura (formato YYYYMMDD)                                                                        |

### Campos de Montos Específicos de AFIP

| Parámetro    | Tipo   | Descripción                              |
| ------------ | ------ | ---------------------------------------- |
| `impNeto`    | number | Monto neto (sin IVA e impuestos)         |
| `impTotal`   | number | Monto total (incluyendo IVA e impuestos) |
| `impTotConc` | number | Monto total para conceptos 1-3           |
| `impOpEx`    | number | Monto de operaciones exentas             |
| `impTrib`    | number | Monto total de impuestos                 |
| `impIVA`     | number | Monto total de IVA                       |
| `monCotiz`   | number | Tipo de cambio de moneda                 |

### Objetos Complejos

#### Facturas Asociadas (`cbtesAsoc`)

```json
{
  "cbtesAsoc": [
    {
      "tipo": 1,
      "ptoVta": 1,
      "nro": 123,
      "cuit": "20-12345678-9",
      "cbteFch": "20240101"
    }
  ]
}
```

#### Impuestos (`tributos`)

```json
{
  "tributos": [
    {
      "id": 1,
      "desc": "Impuestos Internos",
      "baseImp": 1000.0,
      "alic": 10.5,
      "importe": 105.0
    }
  ]
}
```

#### IVA (`iva`)

```json
{
  "iva": [
    {
      "id": 5,
      "baseImp": 1000.0,
      "importe": 210.0
    }
  ]
}
```

#### Items de Factura (`items`)

```json
{
  "items": [
    {
      "description": "Servicio de consultoría",
      "quantity": 1,
      "unitPrice": 1000.0,
      "discount": 0,
      "ivaRate": 21,
      "subtotal": 1000.0
    }
  ]
}
```

#### Campos Opcionales (`opcionales`)

```json
{
  "opcionales": [
    {
      "id": "1",
      "valor": "Valor personalizado"
    }
  ]
}
```

#### Compradores (`compradores`)

```json
{
  "compradores": [
    {
      "docTipo": 80,
      "docNro": 20123456789,
      "porcentaje": 100
    }
  ]
}
```

#### Período de Servicio (`periodoAsoc`)

```json
{
  "periodoAsoc": {
    "fchDesde": "20240101",
    "fchHasta": "20240131"
  }
}
```

#### Actividades (`actividades`)

```json
{
  "actividades": [
    {
      "id": 620100
    }
  ]
}
```

### Procesamiento de IVA

Para facturas no tipo C con items:

- Agrupa IVA por tasa desde los detalles de los items
- Mapea las tasas de IVA a IDs de AFIP via `IVAMappingService`
- Calcula los montos totales de IVA
- Maneja facturas tipo C (IVA = 0)

## Formato de Respuesta

### Respuesta Exitosa

```json
{
  "batch": false,
  "message": "Factura encolada para procesamiento",
  "count": 1,
  "status": "processing",
  "batchId": "batch-uuid",
  "queueIdentifiers": ["production_cuit-id_1_11"]
}
```

### Respuesta Exitosa de Lote

```json
{
  "batch": true,
  "message": "Lote de facturas encolado para procesamiento",
  "count": 5,
  "status": "processing",
  "batchId": "batch-uuid",
  "queueIdentifiers": ["production_cuit-id_1_11", "production_cuit-id_2_1"]
}
```

## Respuestas de Error

### Error de Validación (400)

```json
{
  "error": "Datos inválidos",
  "details": [
    {
      "code": "too_small",
      "minimum": 0.01,
      "type": "number",
      "inclusive": true,
      "exact": false,
      "message": "El monto debe ser positivo",
      "path": ["amount"]
    }
  ]
}
```

### Límite de Suscripción Excedido (403)

```json
{
  "error": "Subscription limit exceeded",
  "details": "Monthly invoice limit reached",
  "code": "SUBSCRIPTION_LIMIT_EXCEEDED"
}
```

### CUIT No Encontrado (400)

```json
{
  "error": "Error al validar CUIT",
  "details": "CUIT not found or access denied"
}
```

### Error del Servidor (500)

```json
{
  "error": "Failed to create invoice",
  "details": "Internal server error"
}
```

- `status`: pending/processing/completed/completed_with_errors/error

## Comportamiento de CUIT por Defecto

Cuando no se proporciona `cuitId` o `cuit` en la petición, el sistema automáticamente usará el CUIT por defecto del usuario. El CUIT por defecto se determina por:

1. **Por defecto explícito**: Un CUIT marcado cono predetminado
2. **CUIT Monotributista**: Si no hay por defecto explícito, usa el primer CUIT disponible

El primer CUIT creado para un usuario automáticamente se convierte en el CUIT por defecto.

## Ejemplos de Uso

### Factura Individual - Usando CUIT por Defecto

```bash
curl -X POST https://facture.ar/api/invoices \
  -H "Content-Type: application/json" \
  -H "x-api-key: tu-api-key" \
  -d '{
    "amount": 1000.00,
  }'
```

### Factura Individual - Con CUIT Explícito

```bash
curl -X POST https://facture.ar/api/invoices \
  -H "Content-Type: application/json" \
  -H "x-api-key: tu-api-key" \
  -d '{
    "cuitId": "123e4567-e89b-12d3-a456-426614174000",
    "amount": 1000.00,
    "description": "Venta de servicios"
  }'
```

### Factura Individual - Detallada

```bash
curl -X POST https://facture.ar/api/invoices \
  -H "Content-Type: application/json" \
  -H "x-api-key: tu-api-key" \
  -d '{
    "cuitId": "123e4567-e89b-12d3-a456-426614174000",
    "amount": 1000.00,
    "description": "Venta de servicios",
    "docTipo": 80,
    "docNro": 20123456789,
    "condicionIVAReceptorId": 1,
    "invoiceType": 1,
    "concepto": 2,
    "ptoVta": 1,
    "clientName": "Cliente S.A.",
    "items": [
      {
        "description": "Servicio de consultoría",
        "quantity": 1,
        "unitPrice": 1000.00,
        "discount": 0,
        "ivaRate": 21,
        "subtotal": 1000.00
      }
    ]
  }'
```

### Facturas en Lote

```bash
curl -X POST https://facture.ar/api/invoices \
  -H "Content-Type: application/json" \
  -H "x-api-key: tu-api-key" \
  -d '[
    {
      "cuitId": "123e4567-e89b-12d3-a456-426614174000",
      "amount": 1000.00,
      "description": "Venta de servicios"
    },
    {
      "cuitId": "123e4567-e89b-12d3-a456-426614174000",
      "amount": 2000.00,
      "description": "Venta de productos"
    }
  ]'
```

### JavaScript/Node.js

```javascript
// Factura individual usando CUIT por defecto
const response = await fetch('https://facture.ar/api/invoices', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'x-api-key': 'tu-api-key',
  },
  body: JSON.stringify({
    amount: 1000.0,
    description: 'Venta de servicios',
    items: [
      {
        description: 'Servicio de consultoría',
        quantity: 1,
        unitPrice: 1000.0,
        discount: 0,
        ivaRate: 21,
        subtotal: 1000.0,
      },
    ],
  }),
});

const result = await response.json();
console.log('Factura encolada:', result);

// Factura individual con CUIT explícito
const responseWithCuit = await fetch('https://facture.ar/api/invoices', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'x-api-key': 'tu-api-key',
  },
  body: JSON.stringify({
    cuitId: '123e4567-e89b-12d3-a456-426614174000',
    amount: 1000.0,
    description: 'Venta de servicios',
    items: [
      {
        description: 'Servicio de consultoría',
        quantity: 1,
        unitPrice: 1000.0,
        discount: 0,
        ivaRate: 21,
        subtotal: 1000.0,
      },
    ],
  }),
});

const resultWithCuit = await responseWithCuit.json();
console.log('Factura encolada:', resultWithCuit);

// Facturas en lote usando CUIT por defecto
const batchResponse = await fetch('https://facture.ar/api/invoices', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'x-api-key': 'tu-api-key',
  },
  body: JSON.stringify([
    {
      amount: 1000.0,
      description: 'Venta de servicios',
    },
    {
      amount: 2000.0,
      description: 'Venta de productos',
    },
  ]),
});

const batchResult = await batchResponse.json();
console.log('Lote encolado:', batchResult);
```

### Python

```python
import requests

# Factura individual usando CUIT por defecto
response = requests.post(
    'https://facture.ar/api/invoices',
    headers={
        'Content-Type': 'application/json',
        'x-api-key': 'tu-api-key'
    },
    json={
        'amount': 1000.00,
        'description': 'Venta de servicios',
        'items': [
            {
                'description': 'Servicio de consultoría',
                'quantity': 1,
                'unitPrice': 1000.00,
                'discount': 0,
                'ivaRate': 21,
                'subtotal': 1000.00
            }
        ]
    }
)

result = response.json()
print('Factura encolada:', result)

# Factura individual con CUIT explícito
response_with_cuit = requests.post(
    'https://facture.ar/api/invoices',
    headers={
        'Content-Type': 'application/json',
        'x-api-key': 'tu-api-key'
    },
    json={
        'cuitId': '123e4567-e89b-12d3-a456-426614174000',
        'amount': 1000.00,
        'description': 'Venta de servicios',
        'items': [
            {
                'description': 'Servicio de consultoría',
                'quantity': 1,
                'unitPrice': 1000.00,
                'discount': 0,
                'ivaRate': 21,
                'subtotal': 1000.00
            }
        ]
    }
)

result_with_cuit = response_with_cuit.json()
print('Factura encolada:', result_with_cuit)

# Facturas en lote usando CUIT por defecto
batch_response = requests.post(
    'https://facture.ar/api/invoices',
    headers={
        'Content-Type': 'application/json',
        'x-api-key': 'tu-api-key'
    },
    json=[
        {
            'amount': 1000.00,
            'description': 'Venta de servicios'
        },
        {
            'amount': 2000.00,
            'description': 'Venta de productos'
        }
    ]
)

batch_result = batch_response.json()
print('Lote encolado:', batch_result)
```

## Monitoreo y Estado

### Seguimiento de Estado del Lote

Monitorea el progreso del lote usando el ID del lote devuelto en la respuesta:

```bash
curl -X GET https://facture.ar/api/batches/{batchId} \
  -H "x-api-key: tu-api-key"
```

## Mejores Prácticas

### 1. Manejo de Errores

Siempre implementa manejo apropiado de errores para diferentes códigos de respuesta:

```javascript
const response = await fetch('https://facture.ar/api/invoices', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'x-api-key': 'tu-api-key',
  },
  body: JSON.stringify(invoiceData),
});

if (!response.ok) {
  const error = await response.json();

  switch (response.status) {
    case 400:
      console.error('Error de validación:', error.details);
      break;
    case 403:
      console.error('Límite de suscripción excedido:', error.details);
      break;
    case 500:
      console.error('Error del servidor:', error.error);
      break;
    default:
      console.error('Error desconocido:', error);
  }

  return;
}

const result = await response.json();
console.log('Factura encolada exitosamente:', result);
```

### 2. Optimización del Tamaño del Lote

- Mantén tamaños de lote razonables (hasta 500 facturas por lote)
- Monitorea tiempos de procesamiento de lotes

## Límites de Tasa

- **Facturas Individuales**: Sin límite específico de tasa (manejado por sistema de colas)
- **Facturas en Lote**: Máximo 500 facturas por lote
- **API Keys**: Sujeto a límites de suscripción

## Soporte

Para soporte técnico o preguntas sobre la API:

- **Email**: support@facture.ar
- **Documentación**: https://docs.facture.ar
- **Página de Estado**: https://status.facture.ar
