---
title: 'GET /invoices/{id}/pdf - Descargar PDF de Factura'
description: 'Documentaci√≥n para descargar el PDF de una factura'
---

# üìÑ GET /invoices/{id}/pdf - Descargar PDF de Factura

Este endpoint te permite descargar el PDF generado de una factura espec√≠fica.

## URL Base

```
https://facture.ar/api/invoices/{id}/pdf
```

## Autenticaci√≥n

Todas las peticiones requieren autenticaci√≥n usando:

- **Sesi√≥n Web**: Para aplicaciones basadas en navegador
- **API Key**: Para integraciones servidor a servidor

Incluye tu API key en el header `x-api-key`:

```bash
x-api-key: tu-api-key-aqui
```

## Par√°metros de Ruta

| Par√°metro | Tipo   | Requerido | Descripci√≥n            | Ejemplo                                  |
| --------- | ------ | --------- | ---------------------- | ---------------------------------------- |
| `id`      | string | ‚úÖ        | ID √∫nico de la factura | `"123e4567-e89b-12d3-a456-426614174000"` |

## Par√°metros de Consulta

| Par√°metro  | Tipo    | Requerido | Descripci√≥n                               | Ejemplo      |
| ---------- | ------- | --------- | ----------------------------------------- | ------------ |
| `format`   | string  | ‚ùå        | Formato del PDF (por defecto: "standard") | `"standard"` |
| `download` | boolean | ‚ùå        | Forzar descarga (por defecto: true)       | `true`       |

## Respuesta

### √âxito (200)

#### Con par√°metro `download=true` (por defecto)

**Content-Type**: `application/pdf`

**Headers**:

```
Content-Type: application/pdf
Content-Disposition: attachment; filename="factura-0001-00000001-production.pdf"
Cache-Control: no-cache
```

**Body**: Archivo PDF binario

#### Sin par√°metro `download` o `download=false`

```json
{
  "download_url": "https://s3.amazonaws.com/bucket/factura-123456.pdf",
  "invoice_id": "123e4567-e89b-12d3-a456-426614174000",
  "invoice_number": "0001-00000001",
  "environment": "production"
}
```

### Respuestas de Error

#### Factura No Encontrada (404)

```json
{
  "error": "Invoice not found",
  "details": "The requested invoice does not exist or you don't have access to it"
}
```

#### PDF No Disponible (404)

```json
{
  "error": "PDF not available",
  "details": "PDF has not been generated for this invoice yet"
}
```

#### No Autorizado (401)

```json
{
  "error": "Unauthorized",
  "details": "Invalid API key or session"
}
```

#### Error del Servidor (500)

```json
{
  "error": "Internal server error",
  "details": "Failed to generate or retrieve PDF"
}
```

## Formatos de PDF

| Formato      | Descripci√≥n                             |
| ------------ | --------------------------------------- |
| `standard`   | PDF est√°ndar con dise√±o oficial de AFIP |
| `simplified` | PDF simplificado (si est√° disponible)   |

## Ejemplos de Uso

### Descargar PDF Est√°ndar

```bash
curl -X GET https://facture.ar/api/invoices/123e4567-e89b-12d3-a456-426614174000/pdf \
  -H "x-api-key: tu-api-key" \
  -o factura.pdf
```

### Obtener URL de Descarga

```bash
curl -X GET "https://facture.ar/api/invoices/123e4567-e89b-12d3-a456-426614174000/pdf?download=false" \
  -H "x-api-key: tu-api-key"
```

### JavaScript/Node.js

```javascript
// Descargar PDF
const response = await fetch('https://facture.ar/api/invoices/123e4567-e89b-12d3-a456-426614174000/pdf', {
  method: 'GET',
  headers: {
    'x-api-key': 'tu-api-key',
  },
});

if (response.ok) {
  const pdfBlob = await response.blob();

  // Crear enlace de descarga
  const url = window.URL.createObjectURL(pdfBlob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'factura.pdf';
  document.body.appendChild(a);
  a.click();
  window.URL.revokeObjectURL(url);
  document.body.removeChild(a);
} else {
  const error = await response.json();
  console.error('Error:', error);
}

// Obtener URL de descarga
const urlResponse = await fetch('https://facture.ar/api/invoices/123e4567-e89b-12d3-a456-426614174000/pdf?download=false', {
  method: 'GET',
  headers: {
    'x-api-key': 'tu-api-key',
  },
});

if (urlResponse.ok) {
  const result = await urlResponse.json();
  console.log('URL de descarga:', result.download_url);
}
```

### Python

```python
import requests

# Descargar PDF
response = requests.get(
    'https://facture.ar/api/invoices/123e4567-e89b-12d3-a456-426614174000/pdf',
    headers={
        'x-api-key': 'tu-api-key'
    }
)

if response.status_code == 200:
    # Guardar PDF
    with open('factura.pdf', 'wb') as f:
        f.write(response.content)
    print('PDF descargado exitosamente')
else:
    error = response.json()
    print('Error:', error)

# Obtener URL de descarga
url_response = requests.get(
    'https://facture.ar/api/invoices/123e4567-e89b-12d3-a456-426614174000/pdf',
    params={'download': 'false'},
    headers={
        'x-api-key': 'tu-api-key'
    }
)

if url_response.status_code == 200:
    result = url_response.json()
    print('URL de descarga:', result['download_url'])
```

### React/Next.js

```jsx
const downloadPDF = async invoiceId => {
  try {
    const response = await fetch(`/api/invoices/${invoiceId}/pdf`, {
      method: 'GET',
      headers: {
        'x-api-key': process.env.NEXT_PUBLIC_API_KEY,
      },
    });

    if (response.ok) {
      const pdfBlob = await response.blob();
      const url = window.URL.createObjectURL(pdfBlob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `factura_${invoiceId}.pdf`;
      document.body.appendChild(a);
      a.click();
      window.URL.revokeObjectURL(url);
      document.body.removeChild(a);
    } else {
      const error = await response.json();
      console.error('Error al descargar PDF:', error);
    }
  } catch (error) {
    console.error('Error:', error);
  }
};
```

## Consideraciones Importantes

### Generaci√≥n de PDF

- Los PDFs se generan autom√°ticamente despu√©s de que la factura es procesada exitosamente por AFIP
- Puede haber un retraso de unos minutos entre el procesamiento exitoso y la disponibilidad del PDF
- Si el PDF no est√° disponible, el endpoint retornar√° un error 404

### Tama√±o de Archivo

- Los PDFs t√≠picamente tienen un tama√±o entre 100KB y 500KB
- El tama√±o puede variar dependiendo del contenido de la factura
- Se recomienda manejar archivos grandes de manera as√≠ncrona

### Cache

- Los PDFs se cachean para mejorar el rendimiento
- Una vez generado, el PDF permanece disponible durante la vida √∫til de la factura

## ‚ùì Soluci√≥n de Problemas

<Accordion title="Error: PDF no disponible">
**Causa**: El PDF a√∫n no ha sido generado para esta factura.

**Soluci√≥n**:

1. Verifica que la factura tenga estado "success"
2. Espera unos minutos y vuelve a intentar
3. Contacta soporte si el problema persiste
   </Accordion>

<Accordion title="Error: Factura no encontrada">
**Causa**: El ID de la factura no existe o no tienes acceso a ella.

**Soluci√≥n**:

1. Verifica que el ID de la factura sea correcto
2. Aseg√∫rate de que la factura pertenezca a tu cuenta
3. Verifica que est√©s usando la API key correcta
   </Accordion>

<Accordion title="Error: Descarga fallida">
**Causa**: Problema con la descarga del archivo.

**Soluci√≥n**:

1. Verifica tu conexi√≥n a internet
2. Intenta descargar nuevamente
3. Usa un navegador diferente si es necesario
   </Accordion>

## üìû Soporte

Para soporte t√©cnico o preguntas sobre la API:

- üìß **Email**: support@facture.ar
- üí¨ **Chat**: Disponible en la plataforma
- üìö **Documentaci√≥n**: Explora nuestros ejemplos detallados
- üé• **Videollamada**: Para asistencia personalizada
